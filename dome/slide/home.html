<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320,user-scalable=no">
    <meta http-equiv="cleartype" content="on">
    <meta content="telephone=no" name="format-detection">
    <title>滑动</title>
    <link rel="stylesheet" href="animate.css"/>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .box {
            width: 320px;
            height: 160px;
            position: relative;
            border: #004444 solid 1px;
        }

        #aimg01 {
            position: absolute;
            left: 0;
            width: 280px;
            height: 160px;
            top: 0;
            display: block;
            border: #006600 solid 1px;
        }

        #aimg03 {
            position: absolute;
            width: 280px;
            height: 160px;
            right: 0;
            top: 0;
            display: block;
            border: #006600 solid 1px;
        }

        #aimg02 {
            position: absolute;
            width: 280px;
            height: 160px;
            left: 20px;
            top: 0;
            display: block;
            border: #006600 solid 1px;
            z-index: 2;
        }

        img {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
<div class="box" id="box">
    <a href="javascript:;" id="aimg01"><img src="" alt=""/></a>
    <a href="javascript:;" id="aimg02"><img src="" alt=""/></a>
    <a href="javascript:;" id="aimg03"><img src="" alt=""/></a>
</div>
<script type="text/javascript" src="zepto/zepto.js"></script>
<script type="text/javascript" src="zepto/touch.js"></script>
<script>
    var imgList = ['img/pic_005.jpg', 'img/pic_006.jpg', 'img/pic_007.jpg', 'img/pic_009.jpg', 'img/pic_010.jpg', 'img/pic_011.jpg'];

    var $img02 = $('#aimg02');
    $img02.on('tap', function () {
        console.log('common in tap')
    })
    $img02.swipeLeft(function () {
        console.log("common in swipeLeft")
        var first = imgList.shift();
        imgList.push(first);
        draw("left");

    })
    $img02.swipeRight(function () {
        console.log("common in swipeRight")
        var last = imgList.pop();
        imgList.unshift(last);
        draw("right");

    })

    function draw(d) {
        $('#aimg01 img').attr('src', imgList[0]);
        $('#aimg02 img').attr('src', imgList[1]);
        $('#aimg03 img').attr('src', imgList[2]);
        if (d === 'right') {
            $img02.addClass('animated slideInLeft')
        } else if (d === 'left') {
            $img02.addClass('animated slideInRight');

        }

        $img02[0].addEventListener("webkitAnimationEnd", function () {
            $img02.removeClass('animated slideInLeft slideInRight')
        }, false);

    }
    draw()
</script>
</body>

</html>

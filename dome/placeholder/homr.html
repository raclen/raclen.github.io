<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <style type="text/css">
    /** new placeholder **/

    .placeholder {
        display: inline-block;
        position: absolute;
        zoom: 1;
        color: #c0c0c0;
        height: 28px;
        line-height: 28px;
        padding: 0px 5px;
        _padding: 2px 5px;
    }

    .placeholder-hide {
        display: none;
    }
    </style>
</head>

<body>
    <input type="text" class="ipt" placeholder="请输入用户名">
    <script type='text/javascript' src="http://libs.baidu.com/jquery/1.11.1/jquery.js"></script>
    <script>
    ;
    (function($) {
        $.fn.extend({
            myPlaceholder: function() {
                if (!('placeholder' in document.createElement('input'))) { //测试浏览器是否支持placeholder属性
                    return this.each(function() {
                        var that = $(this);
                         if(that.attr('fixplaceholder')){
                        	return;
                        }
                        var placeholderTxt = that.attr('placeholder');
                        that.attr('fixplaceholder',true);
                        /* 创建span */
                        var _span = $('<span>');
                        _span.attr('class', 'placeholder');
                        _span.text(placeholderTxt);
                        that.before(_span);
                        if (that.val()) {
                            _span.addClass('placeholder-hide');
                        }
                        /* 绑定事件 */
                        _span.bind('focus', function() {
                            _span.addClass('placeholder-hide');
                            that.focus();
                        });
                        that.bind('focus', function() {
                            _span.addClass('placeholder-hide');
                        }).bind('blur', function() {
                            if (!that.val().length) {
                                _span.removeClass('placeholder-hide');
                            }
                        });
                    });
                }
            }
        })
    })(jQuery);
    $('input').myPlaceholder();
    $(document).on('click',function(){
    	$(document.body).append('<input type="text" class="ipt" placeholder="请输入密码">');
    	  $('input').myPlaceholder();
    })
$.fn.extend({
        myPlaceholder: function() {
            if (!('placeholder' in document.createElement('input'))) { //测试浏览器是否支持placeholder属性
                return this.each(function() {
                    var that = $(this);
                    if(that.attr('fixplaceholder')){
                        return;
                    }
                    var placeholderTxt = that.attr('placeholder');
                    that.attr('fixplaceholder',true);
                    /* 创建span */
                    var _span = $('<span>');
                    _span.attr('class', 'placeholder');
                    _span.text(placeholderTxt);
                    that.before(_span);
                    if (that.val()) {
                        _span.addClass('placeholder-hide');
                    }
                    /* 绑定事件 */
                    _span.bind('focus', function() {
                        _span.addClass('placeholder-hide');
                        that.focus();
                    });
                    that.on('focus', function() {
                        _span.addClass('placeholder-hide');
                    }).on('blur', function() {
                        if (!that.val().length) {
                            _span.removeClass('placeholder-hide');
                        }
                    }).on('change',function(){
                        if (!!that.val().length) {
                            _span.addClass('placeholder-hide');
                        }else{
                            _span.removeClass('placeholder-hide');
                        }
                    });
                });
            }
        }
    })
    </script>
</body>

</html>
